/* ========================================
   ANDROID WEBVIEW COMPATIBILITY FIXES
   Critical fixes for Android WebView CSS issues
   ======================================== */

/* ========================================
   1. DISABLE PROBLEMATIC FEATURES IN WEBVIEW
   ======================================== */

/* Remove backdrop-filter (not supported in Android WebView) */
@supports not (backdrop-filter: blur(10px)) {
    #left-ad {
        background: rgba(34, 197, 94, 0.95) !important;
        backdrop-filter: none !important;
    }
    
    #right-ad {
        background: rgba(255, 255, 255, 0.98) !important;
        backdrop-filter: none !important;
    }
    
    .glass-card {
        background: rgba(255, 255, 255, 0.95) !important;
        backdrop-filter: none !important;
    }
}

/* Force solid backgrounds for WebView */
body.webview #left-ad,
body[data-platform="android"] #left-ad {
    background: linear-gradient(180deg, #dcfce7 0%, #bbf7d0 100%) !important;
    backdrop-filter: none !important;
}

body.webview #right-ad,
body[data-platform="android"] #right-ad {
    background: #ffffff !important;
    backdrop-filter: none !important;
}

/* ========================================
   2. DISABLE ANIMATIONS IN WEBVIEW (Performance + Text Visibility)
   ======================================== */

body.webview .scroll-text,
body[data-platform="android"] .scroll-text {
    animation: none !important;
    transform: translateX(-50%) rotate(-90deg) !important;
    top: 50vh !important;
}

body.webview .ad-qr,
body.webview .ad-text,
body.webview .left-ad-text,
body[data-platform="android"] .ad-qr,
body[data-platform="android"] .ad-text,
body[data-platform="android"] .left-ad-text {
    animation: none !important;
    opacity: 1 !important;
    transform: none !important;
}

/* Disable all animate.css animations in WebView */
body.webview .animate__animated,
body[data-platform="android"] .animate__animated {
    animation: none !important;
}

/* ========================================
   3. CSS VARIABLE FALLBACKS FOR WEBVIEW
   ======================================== */

/* Fallback values when CSS variables don't work */
body.webview,
body[data-platform="android"] {
    font-size: 14px !important;
}

body.webview #landing-page header img,
body[data-platform="android"] #landing-page header img {
    width: 2.5rem !important;
    height: 2.5rem !important;
}

body.webview #landing-mic-icon,
body[data-platform="android"] #landing-mic-icon {
    width: 6rem !important;
    height: 6rem !important;
    display: flex !important;
    visibility: visible !important;
}

body.webview #landing-mic-icon svg,
body[data-platform="android"] #landing-mic-icon svg {
    width: 3rem !important;
    height: 3rem !important;
}

body.webview .glass-card,
body[data-platform="android"] .glass-card {
    padding: 1rem !important;
}

body.webview #auth-buttons a,
body[data-platform="android"] #auth-buttons a {
    padding: 0.5rem 1rem !important;
    font-size: 0.875rem !important;
}

/* ========================================
   4. KIOSK 1366x768 WEBVIEW SPECIFIC
   ======================================== */

@media (min-width: 1366px) and (max-height: 768px) {
    body.webview,
    body[data-platform="android"] {
        font-size: 11px !important;
        margin-left: 60px !important;
        margin-right: 120px !important;
    }
    
    body.webview #landing-page header img,
    body[data-platform="android"] #landing-page header img {
        width: 1.8rem !important;
        height: 1.8rem !important;
    }
    
    body.webview #landing-mic-icon,
    body[data-platform="android"] #landing-mic-icon {
        width: 4rem !important;
        height: 4rem !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        visibility: visible !important;
        opacity: 1 !important;
    }
    
    body.webview #landing-mic-icon svg,
    body[data-platform="android"] #landing-mic-icon svg {
        width: 2rem !important;
        height: 2rem !important;
    }
    
    body.webview #landing-page header h1,
    body[data-platform="android"] #landing-page header h1 {
        font-size: 1.3rem !important;
    }
    
    body.webview .glass-card,
    body[data-platform="android"] .glass-card {
        padding: 0.75rem !important;
        font-size: 0.75rem !important;
    }
    
    body.webview #auth-buttons a,
    body[data-platform="android"] #auth-buttons a {
        padding: 0.4rem 0.8rem !important;
        font-size: 0.7rem !important;
    }
    
    /* Force left ad visibility */
    body.webview #left-ad,
    body[data-platform="android"] #left-ad {
        width: 60px !important;
        background: linear-gradient(180deg, #dcfce7 0%, #bbf7d0 100%) !important;
        display: block !important;
        position: fixed !important;
    }
    
    body.webview #right-ad,
    body[data-platform="android"] #right-ad {
        width: 120px !important;
        background: #ffffff !important;
        display: block !important;
        position: fixed !important;
    }
    
    body.webview .scroll-text,
    body[data-platform="android"] .scroll-text {
        font-size: 10px !important;
        animation: none !important;
    }
}

/* ========================================
   5. FORCE VISIBILITY FOR HIDDEN ELEMENTS
   ======================================== */

body.webview #landing-mic-icon,
body.webview #landing-page,
body.webview .glass-card,
body[data-platform="android"] #landing-mic-icon,
body[data-platform="android"] #landing-page,
body[data-platform="android"] .glass-card {
    display: flex !important;
    visibility: visible !important;
    opacity: 1 !important;
}

/* Ensure fixed positioning works */
body.webview #left-ad,
body.webview #right-ad,
body[data-platform="android"] #left-ad,
body[data-platform="android"] #right-ad {
    position: fixed !important;
    display: block !important;
}

/* ========================================
   6. FLEXBOX FALLBACKS
   ======================================== */

body.webview .flex,
body[data-platform="android"] .flex {
    display: -webkit-box !important;
    display: -webkit-flex !important;
    display: flex !important;
}

body.webview .items-center,
body[data-platform="android"] .items-center {
    -webkit-box-align: center !important;
    -webkit-align-items: center !important;
    align-items: center !important;
}

body.webview .justify-center,
body[data-platform="android"] .justify-center {
    -webkit-box-pack: center !important;
    -webkit-justify-content: center !important;
    justify-content: center !important;
}

/* ========================================
   7. TEXT RENDERING FIXES
   ======================================== */

body.webview,
body.webview *,
body[data-platform="android"],
body[data-platform="android"] * {
    -webkit-font-smoothing: antialiased !important;
    -moz-osx-font-smoothing: grayscale !important;
    text-rendering: optimizeLegibility !important;
}

/* ========================================
   8. HARDWARE ACCELERATION
   ======================================== */

body.webview #landing-mic-icon,
body.webview .glass-card,
body[data-platform="android"] #landing-mic-icon,
body[data-platform="android"] .glass-card {
    -webkit-transform: translateZ(0) !important;
    transform: translateZ(0) !important;
    will-change: auto !important;
}
